{"version":3,"sources":["layout/SideNav.js","actions/types.js","apis/holoDev.js","actions/streamActions.js","actions/multiViewActions.js","ui/Tooltip.js","stream/StreamCircleList.js","ui/Modal.js","multiView/ControlModal.js","layout/MultiViewHeader.js","layout/Header.js","layout/Layout.js","stream/StreamChip.js","stream/StreamItem.js","stream/StreamList.js","multiView/StreamIframeWrapper.js","multiView/index.js","App.js","reportWebVitals.js","reducers/streamReducer.js","reducers/multiViewReducer.js","reducers/index.js","index.js"],"names":["SideNav","open","toggle","ref","useRef","useEffect","handleOutsideClick","event","current","contains","target","window","addEventListener","removeEventListener","className","onClick","to","exact","activeClassName","FETCH_LIVE_STREAM","FETCH_SCHEDULED_STREAM","FETCH_CHANNEL","FETCH_MEMBER","ADD_STREAM_TO_MULTI_VIEW","REMOVE_STREAM_FROM_MULTI_VIEW","CHANGE_STATUS_TO_PLAY","CHANGE_STATUS_TO_PAUSE","CHANGE_STATUS_TO_MUTE","CHANGE_STATUS_TO_UNMUTE","SHOW_CHAT","HIDE_CHAT","axios","create","baseURL","fetchLiveStream","dispatch","a","holoDev","get","response","liveStream","data","lives","map","live","status","type","payload","fetchScheduledStream","scheduledStream","fetchChannel","channel","JSON","parse","sessionStorage","getItem","length","page","hasNextPage","concat","channels","total","setItem","stringify","fetchMember","member","removeStreamFromMultiView","id","playVideo","pauseVideo","Tooltop","children","title","position","positionClass","StreamCircleList","useDispatch","useSelector","state","streamReducer","members","multiViewList","multiViewReducer","toggleStream","stream","some","item","addStreamToMultiView","renderLiveStreamCircle","memberId","find","channel_id","member_id","Tooltip","name","src","avatar","alt","Modal","isOpen","ReactDOM","createPortal","document","querySelector","ControlModal","multiViewLength","renderControlList","isPlaying","isMuted","isChatShown","unMute","mute","hideChat","showChat","MultiViewHeader","useState","setIsOpen","prevStatus","Navigation","setOpen","location","useLocation","prevState","pathname","renderHeader","Layout","props","Header","getDuration","startAt","now","dayjs","duration","diff","format","extend","relativeTime","StreamChip","start_at","setDuration","intervalId","setInterval","clearInterval","locale","StreamItem","href","room","rel","cover","startTime","timeFromNow","fromNow","renderTimeFromNow","StreamList","renderLiveStreamItem","renderScheduledStreamItem","filter","isBefore","add","stateMapping","StreamIframeWrapper","player","setPlayer","YoutubePlayer","width","height","videoId","playerVars","playsinline","listener","on","off","chatRoomIframeSrc","hostname","frameBorder","gridStyle","MultiViewIndex","renderIframeWrapper","App","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","INITAL_STATE","action","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.21b1e7cb.chunk.js","sourcesContent":["import { NavLink } from 'react-router-dom';\nimport { MenuIcon, HomeIcon, ViewGridIcon } from '@heroicons/react/outline';\nimport { useEffect } from 'react';\nimport { useRef } from 'react';\n\nfunction SideNav({ open, toggle }) {\n  const ref = useRef(null);\n\n  useEffect(() => {\n    const handleOutsideClick = (event) => {\n      if (!ref.current.contains(event.target)) {\n        if (!open) return;\n        toggle();\n      }\n    };\n\n    window.addEventListener('click', handleOutsideClick, true);\n\n    return () => window.removeEventListener('click', handleOutsideClick, true);\n  }, [open, toggle]);\n\n  return (\n    <aside\n      ref={ref}\n      className={`fixed top-0 left-0 h-screen w-56 ${\n        !open && '-translate-x-full'\n      } bg-white z-10 transform duration-200`}\n    >\n      <div className=\"h-14 pl-4 mb-2 flex items-center space-x-4\">\n        <button onClick={toggle} className=\"w-6 h-6\">\n          <MenuIcon />\n        </button>\n        <div className=\"text-xl tracking-wide font-bold\">Holo Viewer</div>\n      </div>\n      <nav>\n        <NavLink\n          to=\"/\"\n          exact\n          className=\"py-2 px-4 flex items-center space-x-4 hover:bg-gray-100\"\n          activeClassName=\"bg-gray-200\"\n          onClick={toggle}\n        >\n          <HomeIcon className=\"h-6 w-6\" />\n          <span>首頁</span>\n        </NavLink>\n        <NavLink\n          to=\"/multi-view\"\n          exact\n          className=\"py-2 px-4 flex items-center space-x-4 hover:bg-gray-100\"\n          activeClassName=\"bg-gray-200\"\n          onClick={toggle}\n        >\n          <ViewGridIcon className=\"h-6 w-6\" />\n          <span>多窗閱覽</span>\n        </NavLink>\n      </nav>\n    </aside>\n  );\n}\n\nexport default SideNav;\n","// stream\nexport const FETCH_LIVE_STREAM = 'FETCH_LIVE_STREAM';\nexport const FETCH_SCHEDULED_STREAM = 'FETCH_SCHEDULED_STREAM';\nexport const FETCH_CHANNEL = 'FETCH_CHANNEL';\nexport const FETCH_MEMBER = 'FETCH_MEMBER';\n\n// multi view\nexport const ADD_STREAM_TO_MULTI_VIEW = 'ADD_STREAM_TO_MULTI_VIEW';\nexport const REMOVE_STREAM_FROM_MULTI_VIEW = 'REMOVE_STREAM_FROM_MULTI_VIEW';\nexport const CHANGE_STATUS_TO_PLAY = 'CHANGE_STATUS_TO_PLAY';\nexport const CHANGE_STATUS_TO_PAUSE = 'CHANGE_STATUS_TO_PAUSE';\nexport const CHANGE_STATUS_TO_MUTE = 'CHANGE_STATUS_TO_MUTE';\nexport const CHANGE_STATUS_TO_UNMUTE = 'CHANGE_STATUS_TO_UNMUTE';\nexport const SHOW_CHAT = 'SHOW_CHAT';\nexport const HIDE_CHAT = 'HIDE_CHAT';\n","import axios from 'axios';\n\nexport default axios.create({\n  baseURL: 'https://holo.dev/api/v1',\n});\n\n// export const fetchLiveStream = () => request.get('/lives/current');\n\n// export const fetchScheduledStream = () => request.get('/lives/scheduled');\n","import {\n  FETCH_LIVE_STREAM,\n  FETCH_SCHEDULED_STREAM,\n  FETCH_CHANNEL,\n  FETCH_MEMBER,\n} from './types';\nimport holoDev from '../apis/holoDev';\nimport res from '../response';\nimport scheduledRes from '../scheduledRes';\n\nexport const fetchLiveStream = () => async (dispatch) => {\n  const response = await holoDev.get('/lives/current');\n  // const response = res;\n  const liveStream = response.data.lives.map((live) => {\n    return {\n      ...live,\n      status: 'live',\n    };\n  });\n\n  dispatch({\n    type: FETCH_LIVE_STREAM,\n    payload: liveStream,\n  });\n};\n\nexport const fetchScheduledStream = () => async (dispatch) => {\n  const response = await holoDev.get('/lives/scheduled');\n  // const response = scheduledRes;\n  const scheduledStream = response.data.lives.map((live) => {\n    return {\n      ...live,\n      status: 'scheduled',\n    };\n  });\n\n  dispatch({\n    type: FETCH_SCHEDULED_STREAM,\n    payload: scheduledStream,\n  });\n};\n\nexport const fetchChannel = () => async (dispatch) => {\n  let channel = JSON.parse(sessionStorage.getItem('channel')) || [];\n\n  if (channel.length === 0) {\n    let page = 1;\n    let hasNextPage = true;\n    while (hasNextPage) {\n      const response = await holoDev.get(`channels?limit=100&page=${page}`);\n      channel = channel.concat(response.data.channels);\n\n      if (channel.length < response.data.total) {\n        page++;\n      } else {\n        hasNextPage = false;\n      }\n    }\n\n    sessionStorage.setItem('channel', JSON.stringify(channel));\n  }\n\n  dispatch({\n    type: FETCH_CHANNEL,\n    payload: channel,\n  });\n};\n\nexport const fetchMember = () => async (dispatch) => {\n  let member = JSON.parse(sessionStorage.getItem('member')) || [];\n\n  if (member.length === 0) {\n    const response = await holoDev.get('/members');\n    member = response.data;\n    sessionStorage.setItem('member', JSON.stringify(member));\n  }\n\n  dispatch({\n    type: FETCH_MEMBER,\n    payload: member,\n  });\n};\n","import {\n  ADD_STREAM_TO_MULTI_VIEW,\n  REMOVE_STREAM_FROM_MULTI_VIEW,\n  CHANGE_STATUS_TO_PLAY,\n  CHANGE_STATUS_TO_PAUSE,\n  CHANGE_STATUS_TO_MUTE,\n  CHANGE_STATUS_TO_UNMUTE,\n  SHOW_CHAT,\n  HIDE_CHAT,\n} from './types';\n\nexport const addStreamToMultiView = (stream) => {\n  return {\n    type: ADD_STREAM_TO_MULTI_VIEW,\n    payload: stream,\n  };\n};\n\nexport const removeStreamFromMultiView = (id) => {\n  return {\n    type: REMOVE_STREAM_FROM_MULTI_VIEW,\n    payload: id,\n  };\n};\n\nexport const playVideo = (id) => {\n  return {\n    type: CHANGE_STATUS_TO_PLAY,\n    payload: id,\n  };\n};\n\nexport const pauseVideo = (id) => {\n  return {\n    type: CHANGE_STATUS_TO_PAUSE,\n    payload: id,\n  };\n};\n\nexport const mute = (id) => {\n  return {\n    type: CHANGE_STATUS_TO_MUTE,\n    payload: id,\n  };\n};\n\nexport const unMute = (id) => {\n  return {\n    type: CHANGE_STATUS_TO_UNMUTE,\n    payload: id,\n  };\n};\n\nexport const showChat = (id) => {\n  return {\n    type: SHOW_CHAT,\n    payload: id,\n  };\n};\n\nexport const hideChat = (id) => {\n  return {\n    type: HIDE_CHAT,\n    payload: id,\n  };\n};\n","const Tooltop = ({ children, title, position }) => {\n  if (!title) return <>{children}</>;\n\n  const positionClass = position === 'left' ? 'left-0' : 'right-0';\n\n  return (\n    <div className=\"relative group flex items-center justify-center \">\n      {children}\n      <span\n        className={`w-max absolute top-[120%] ${positionClass} bg-gray-800 text-white text-sm px-3 py-2 rounded-md opacity-0 lg:group-hover:opacity-100 duration-300 pointer-events-none`}\n      >\n        {title}\n      </span>\n    </div>\n  );\n};\n\nexport default Tooltop;\n","import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  fetchLiveStream,\n  fetchScheduledStream,\n  fetchChannel,\n  fetchMember,\n  addStreamToMultiView,\n  removeStreamFromMultiView,\n} from '../actions/';\nimport Tooltip from '../ui/Tooltip';\n\nfunction StreamCircleList() {\n  const dispatch = useDispatch();\n  const liveStream = useSelector((state) => state.streamReducer.liveStream);\n  const channels = useSelector((state) => state.streamReducer.channel);\n  const members = useSelector((state) => state.streamReducer.member);\n  const multiViewList = useSelector((state) => state.multiViewReducer);\n\n  useEffect(() => {\n    dispatch(fetchLiveStream());\n    dispatch(fetchScheduledStream());\n    dispatch(fetchChannel());\n    dispatch(fetchMember());\n  }, [dispatch]);\n\n  const toggleStream = (stream) => {\n    multiViewList.some((item) => item.id === stream.id)\n      ? dispatch(removeStreamFromMultiView(stream.id))\n      : dispatch(addStreamToMultiView(stream));\n  };\n\n  const renderLiveStreamCircle = liveStream.map((stream) => {\n    const memberId = channels.find(\n      (channel) => channel.id === stream.channel_id\n    )?.member_id;\n    const member = members.find((member) => member.id === memberId);\n\n    return (\n      <Tooltip\n        key={stream.id}\n        title={`${member.name} - ${stream.title}`}\n        position=\"left\"\n      >\n        <button\n          className={`rounded-full  ${\n            multiViewList.some((item) => item.id === stream.id) &&\n            'ring-4 ring-red-500'\n          }`}\n          onClick={() => toggleStream(stream)}\n        >\n          <img\n            className=\"w-12 h-12 rounded-full\"\n            src={member?.avatar}\n            alt=\"avatar\"\n          />\n        </button>\n      </Tooltip>\n    );\n  });\n\n  return <div className=\"flex space-x-4\">{renderLiveStreamCircle}</div>;\n}\n\nexport default StreamCircleList;\n","import { useEffect } from 'react';\nimport { useRef } from 'react';\nimport ReactDOM from 'react-dom';\n\nconst Modal = ({ isOpen, toggle, children, title }) => {\n  const ref = useRef();\n\n  useEffect(() => {\n    const handleOutsideClick = (event) => {\n      if (!ref.current?.contains(event.target)) {\n        if (!isOpen) return;\n\n        toggle(false);\n      }\n    };\n    window.addEventListener('click', handleOutsideClick, true);\n\n    return () => window.removeEventListener('click', handleOutsideClick, true);\n  }, [isOpen, ref, toggle]);\n\n  const renderHeader = () => {\n    return <div className=\"text-2xl\">{title}</div>;\n  };\n\n  if (!isOpen) return null;\n\n  return ReactDOM.createPortal(\n    <>\n      <div className=\"fixed top-0 left-0 z-30 w-screen h-screen bg-black opacity-50\"></div>\n      <div className=\"fixed top-0 overflow-y-auto left-0 z-40 w-full h-full m-0\">\n        <div\n          className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-10/12 md:w-6/12 lg:w-4/12\"\n          ref={ref}\n        >\n          <div className=\"relative flex flex-col bg-white pointer-events-auto px-7 py-4 space-y-4 rounded\">\n            {title && renderHeader()}\n            <div>{children}</div>\n          </div>\n        </div>\n      </div>\n    </>,\n    document.querySelector('#modal')\n  );\n};\n\nexport default Modal;\n","import { useDispatch, useSelector } from 'react-redux';\nimport {\n  PlayIcon,\n  PauseIcon,\n  TrashIcon,\n  VolumeUpIcon,\n  VolumeOffIcon,\n  ChatAlt2Icon as ShowChatIcon,\n} from '@heroicons/react/outline';\nimport { ChatAlt2Icon as HideChatIcon } from '@heroicons/react/solid';\nimport {\n  playVideo,\n  pauseVideo,\n  mute,\n  unMute,\n  removeStreamFromMultiView,\n  showChat,\n  hideChat,\n} from '../actions';\nimport Modal from '../ui/Modal';\n\nfunction ControlModal({ isOpen, toggle }) {\n  const dispatch = useDispatch();\n  const multiViewList = useSelector((state) => state.multiViewReducer);\n  const multiViewLength = multiViewList.length;\n  const channels = useSelector((state) => state.streamReducer.channel);\n  const members = useSelector((state) => state.streamReducer.member);\n\n  const renderControlList = multiViewList.map(\n    ({ id, channel_id, title, isPlaying, isMuted, isChatShown }) => {\n      const memberId = channels.find(\n        (channel) => channel.id === channel_id\n      )?.member_id;\n      const member = members.find((member) => member.id === memberId);\n\n      return (\n        <div className=\"flex mb-4\" key={id}>\n          <img\n            className=\"self-center w-12 h-12 rounded-full mr-3\"\n            src={member?.avatar}\n            alt=\"avatar\"\n          />\n          <div className=\"flex-1 min-w-0 space-y-2\">\n            <p className=\"truncate\">{title}</p>\n            <div className=\"flex justify-center items-center space-x-4\">\n              <button\n                className=\"w-8 h-8 text-gray-500 hover:text-gray-600\"\n                onClick={() =>\n                  isPlaying ? dispatch(pauseVideo(id)) : dispatch(playVideo(id))\n                }\n              >\n                {isPlaying ? <PauseIcon /> : <PlayIcon />}\n              </button>\n              <button\n                className=\"w-8 h-8 text-gray-500 hover:text-gray-600\"\n                onClick={() =>\n                  isMuted ? dispatch(unMute(id)) : dispatch(mute(id))\n                }\n              >\n                {isMuted ? <VolumeOffIcon /> : <VolumeUpIcon />}\n              </button>\n              <button\n                className=\"w-8 h-8 text-gray-500 hover:text-gray-600\"\n                onClick={() => dispatch(removeStreamFromMultiView(id))}\n              >\n                <TrashIcon />\n              </button>\n              <button\n                className=\"w-8 h-8 text-gray-500 hover:text-gray-600\"\n                onClick={() => {\n                  isChatShown ? dispatch(hideChat(id)) : dispatch(showChat(id));\n                }}\n              >\n                {isChatShown ? <HideChatIcon /> : <ShowChatIcon />}\n              </button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n  );\n\n  return (\n    <Modal isOpen={isOpen} toggle={toggle} title=\"控制面版\">\n      {multiViewLength ? renderControlList : '目前沒有選取到影片'}\n    </Modal>\n  );\n}\n\nexport default ControlModal;\n","import { useState } from 'react';\nimport StreamCircleList from '../stream/StreamCircleList';\nimport ControlModal from '../multiView/ControlModal';\nimport { AdjustmentsIcon } from '@heroicons/react/outline';\nimport Tooltip from '../ui/Tooltip';\n\nfunction MultiViewHeader() {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const toggle = () => {\n    setIsOpen(!isOpen);\n  };\n\n  return (\n    <div className=\"w-full px-4\">\n      <div className=\"flex justify-between items-center\">\n        <StreamCircleList />\n        <div className=\"flex items-center\">\n          <Tooltip title=\"開啟控制面版\" position=\"right\">\n            <button className=\"w-10 h-10\">\n              <AdjustmentsIcon\n                className=\"text-yellow-300 hover:text-yellow-400 rounded-full\"\n                onClick={() => setIsOpen((prevStatus) => !prevStatus)}\n              />\n            </button>\n          </Tooltip>\n        </div>\n      </div>\n      <ControlModal isOpen={isOpen} toggle={toggle} />\n    </div>\n  );\n}\n\nexport default MultiViewHeader;\n","import {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  useLocation,\n} from 'react-router-dom';\nimport { MenuIcon } from '@heroicons/react/outline';\nimport { useState } from 'react';\nimport SideNav from './SideNav';\nimport MultiViewHeader from './MultiViewHeader';\n\nfunction Navigation() {\n  const [open, setOpen] = useState(false);\n  const location = useLocation();\n\n  const toggle = () => {\n    setOpen((prevState) => !prevState);\n  };\n\n  const renderHeader = () => {\n    switch (location.pathname) {\n      case '/multi-view':\n        return <MultiViewHeader />;\n      default:\n        return (\n          <div className=\"text-xl tracking-wide font-bold px-4\">\n            Holo Viewer\n          </div>\n        );\n    }\n  };\n\n  return (\n    <>\n      <Router>\n        <Switch>\n          <Route></Route>\n        </Switch>\n      </Router>\n      <header className=\"h-14 w-full flex items-center bg-gray-400/90 sticky top-0 z-10 backdrop-blur-sm pl-4\">\n        <button onClick={toggle} className=\"w-6 h-6\">\n          <MenuIcon />\n        </button>\n        {renderHeader()}\n      </header>\n      <SideNav open={open} toggle={toggle} />\n    </>\n  );\n}\n\nexport default Navigation;\n","import Header from './Header';\n\nfunction Layout(props) {\n  return (\n    <>\n      <Header />\n      <main>{props.children}</main>\n    </>\n  );\n}\n\nexport default Layout;\n","import dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport duration from 'dayjs/plugin/duration';\nimport { useEffect, useState } from 'react';\ndayjs.extend(relativeTime);\ndayjs.extend(duration);\n\nfunction getDuration(startAt) {\n  const now = dayjs();\n  const duration = dayjs.duration(now.diff(dayjs(startAt)));\n\n  return duration.format('HH:mm:ss');\n}\n\nfunction StreamChip({ stream }) {\n  const { start_at: startAt } = stream;\n  const [duration, setDuration] = useState(() => getDuration(startAt));\n\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      setDuration(getDuration(startAt));\n    }, 1000);\n\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [startAt]);\n\n  return (\n    <span className=\"absolute bottom-2 right-2 text-white font-bold tracking-wide bg-red-600/90 px-2 py-0 rounded-sm\">\n      {duration}\n    </span>\n  );\n}\n\nexport default StreamChip;\n","import dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport 'dayjs/locale/zh-tw';\nimport { useSelector } from 'react-redux';\nimport StreamChip from './StreamChip';\ndayjs.extend(relativeTime);\ndayjs.locale('zh-tw');\n\nfunction StreamItem({ stream }) {\n  const channels = useSelector((state) => state.streamReducer.channel);\n  const members = useSelector((state) => state.streamReducer.member);\n\n  const memberId = channels.find(\n    (channel) => channel.id === stream.channel_id\n  )?.member_id;\n  const member = members.find((member) => member.id === memberId);\n\n  const renderTimeFromNow = () => {\n    const startTime = dayjs(stream.start_at).format('HH:mm');\n    const timeFromNow = dayjs(stream.start_at).fromNow();\n\n    return (\n      <p className=\"text-sm\">\n        將於 {timeFromNow}開始 ({startTime})\n      </p>\n    );\n  };\n\n  return (\n    <a\n      href={`https://www.youtube.com/watch?v=${stream.room}`}\n      target=\"_blank\"\n      rel=\"noreferrer noopener\"\n    >\n      <div\n        key={stream.id}\n        className=\"w-full shadow bg-white rounded-lg overflow-hidden\"\n      >\n        <div className=\"relative pt-[56.25%]\">\n          <img\n            className=\"absolute top-0 left-0 w-full h-full object-contain\"\n            src={stream.cover}\n            alt={stream.title}\n          />\n          {stream.status === 'live' && <StreamChip stream={stream} />}\n        </div>\n        <div className=\"flex items-center h-[80px]\">\n          {/* avatar */}\n          <div className=\"w-[50px] rounded-full overflow-hidden ml-2 mr-4\">\n            <img src={member?.avatar} alt=\"avator\" />\n          </div>\n          {/* text */}\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-lg text-left tracking-wide text-i truncate\">\n              {stream.title}\n            </p>\n            <p className=\"pt-1\">{member?.name}</p>\n            {stream.status === 'scheduled' && renderTimeFromNow()}\n          </div>\n        </div>\n      </div>\n    </a>\n  );\n}\n\nexport default StreamItem;\n","import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport StreamItem from './StreamItem';\nimport {\n  fetchLiveStream,\n  fetchScheduledStream,\n  fetchChannel,\n  fetchMember,\n} from '../actions/';\nimport dayjs from 'dayjs';\n\nfunction StreamList() {\n  const dispatch = useDispatch();\n  const liveStream = useSelector((state) => state.streamReducer.liveStream);\n  const scheduledStream = useSelector(\n    (state) => state.streamReducer.scheduledStream\n  );\n\n  useEffect(() => {\n    dispatch(fetchLiveStream());\n    dispatch(fetchScheduledStream());\n    dispatch(fetchChannel());\n    dispatch(fetchMember());\n  }, [dispatch]);\n\n  const renderLiveStreamItem = liveStream.map((stream) => {\n    return <StreamItem key={stream.id} stream={stream} />;\n  });\n\n  const renderScheduledStreamItem = scheduledStream\n    .filter((stream) => {\n      // 只顯示預定將於 24 小時之內開始之直播\n      return dayjs(stream.start_at).isBefore(dayjs().add(1, 'day'));\n    })\n    .map((stream) => {\n      return <StreamItem key={stream.id} stream={stream} />;\n    });\n\n  return (\n    <div className=\"p-4 min-h-screen bg-gray-100\">\n      <div>\n        <p className=\"text-lg font-bold text-green-600 mb-5\">直播中</p>\n        <div className=\"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2\">\n          {liveStream.length === 0\n            ? 'There is no live stream now'\n            : renderLiveStreamItem}\n        </div>\n      </div>\n      <div className=\"mt-6\">\n        <p className=\"text-lg font-bold text-green-600 mb-5\">預定直播</p>\n        <div className=\"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2\">\n          {scheduledStream.length === 0\n            ? 'There is no scheduled stream now'\n            : renderScheduledStreamItem}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default StreamList;\n","import { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport YoutubePlayer from 'youtube-player';\nimport { playVideo, pauseVideo } from '../actions';\n\nconst stateMapping = {\n  playing: 1,\n  paused: 2,\n};\n\nfunction StreamIframeWrapper({ stream }) {\n  const dispatch = useDispatch();\n  const { id, room, isPlaying, isMuted, isChatShown } = stream;\n  const [player, setPlayer] = useState(null);\n\n  useEffect(() => {\n    let player = YoutubePlayer(`player-${id}`, {\n      width: '100%',\n      height: '100%',\n      videoId: room,\n      playerVars: {\n        playsinline: 1,\n      },\n    });\n    setPlayer(player);\n\n    const listener = player.on('stateChange', (event) => {\n      if (event.data === stateMapping['playing']) {\n        dispatch(playVideo(id));\n      } else if (event.data === stateMapping['paused']) {\n        dispatch(pauseVideo(id));\n      }\n    });\n\n    return () => player.off(listener);\n  }, [id, room, dispatch]);\n\n  useEffect(() => {\n    if (!player) return;\n\n    if (isPlaying) {\n      player.playVideo();\n    } else {\n      player.pauseVideo();\n    }\n  }, [player, isPlaying]);\n\n  useEffect(() => {\n    if (!player) return;\n\n    if (isMuted) {\n      player.mute();\n    } else {\n      player.unMute();\n    }\n  }, [player, isMuted]);\n\n  const chatRoomIframeSrc = `https://gaming.youtube.com/live_chat?v=${stream.room}&embed_domain=${window.location.hostname}`;\n\n  return (\n    <div className=\"flex flex-col lg:flex-row\">\n      {/* video */}\n      <div className=\"relative pt-[56.25%] lg:pt-0 lg:flex-1\">\n        <div\n          className=\"absolute top-0 left-0 w-full h-full\"\n          id={`player-${stream.id}`}\n        ></div>\n      </div>\n\n      {/* chat */}\n      <div\n        className={`w-full lg:w-[300px] h-[400px] lg:h-full ${\n          !isChatShown && 'hidden'\n        }`}\n      >\n        <iframe\n          title=\"chatRoom\"\n          src={chatRoomIframeSrc}\n          width=\"100%\"\n          height=\"100%\"\n          frameBorder=\"0\"\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default StreamIframeWrapper;\n","import { useSelector } from 'react-redux';\nimport StreamIframeWrapper from './StreamIframeWrapper';\n\nconst gridStyle = {\n  1: 'lg:grid-cols-1',\n  2: 'lg:grid-cols-2',\n  3: 'lg:grid-cols-2',\n  4: 'lg:grid-cols-2',\n  5: 'lg:grid-cols-3',\n  6: 'lg:grid-cols-3',\n  7: 'lg:grid-cols-3',\n  8: 'lg:grid-cols-3',\n  9: 'lg:grid-cols-3',\n};\n\nfunction MultiViewIndex() {\n  const multiViewList = useSelector((state) => state.multiViewReducer);\n  const multiViewLength = multiViewList.length;\n\n  const renderIframeWrapper = () => {\n    if (multiViewLength >= 0) {\n      return multiViewList.map((stream) => {\n        return <StreamIframeWrapper key={stream.id} stream={stream} />;\n      });\n    }\n  };\n\n  return (\n    <div\n      className={`lg:h-[calc(100vh-56px)] lg:grid lg:grid-flow-row ${\n        multiViewLength && gridStyle[multiViewLength]\n      }`}\n    >\n      {renderIframeWrapper()}\n    </div>\n  );\n}\n\nexport default MultiViewIndex;\n","import { HashRouter as Router, Switch, Route } from 'react-router-dom';\nimport Layout from './layout/Layout';\nimport StreamList from './stream/StreamList';\nimport MultiViewIndex from './multiView';\n\nfunction App() {\n  return (\n    <Router>\n      <Layout>\n        <Switch>\n          <Route path=\"/\" exact component={StreamList}></Route>\n          <Route path=\"/multi-view\" exact component={MultiViewIndex}></Route>\n        </Switch>\n      </Layout>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {\n  FETCH_LIVE_STREAM,\n  FETCH_SCHEDULED_STREAM,\n  FETCH_CHANNEL,\n  FETCH_MEMBER,\n} from '../actions/types';\n\nconst INITAL_STATE = {\n  liveStream: [],\n  scheduledStream: [],\n  channel: [],\n  member: [],\n};\n\nconst streamReducer = (state = INITAL_STATE, action) => {\n  switch (action.type) {\n    case FETCH_LIVE_STREAM:\n      return { ...state, liveStream: action.payload };\n    case FETCH_SCHEDULED_STREAM:\n      return { ...state, scheduledStream: action.payload };\n    case FETCH_CHANNEL:\n      return { ...state, channel: action.payload };\n    case FETCH_MEMBER:\n      return { ...state, member: action.payload };\n    default:\n      return state;\n  }\n};\n\nexport default streamReducer;\n","import {\n  ADD_STREAM_TO_MULTI_VIEW,\n  REMOVE_STREAM_FROM_MULTI_VIEW,\n  CHANGE_STATUS_TO_PLAY,\n  CHANGE_STATUS_TO_PAUSE,\n  CHANGE_STATUS_TO_MUTE,\n  CHANGE_STATUS_TO_UNMUTE,\n  SHOW_CHAT,\n  HIDE_CHAT,\n} from '../actions/types';\n\nconst multiViewReducer = (state = [], action) => {\n  switch (action.type) {\n    case ADD_STREAM_TO_MULTI_VIEW:\n      return [\n        ...state,\n        {\n          ...action.payload,\n          isChatShown: true,\n          isPlaying: false,\n          isMuted: false,\n        },\n      ];\n    case REMOVE_STREAM_FROM_MULTI_VIEW:\n      return [...state].filter((stream) => {\n        return stream.id !== action.payload;\n      });\n    case CHANGE_STATUS_TO_PLAY:\n      return state.map((stream) => {\n        if (stream.id === action.payload) stream.isPlaying = true;\n\n        return stream;\n      });\n    case CHANGE_STATUS_TO_PAUSE:\n      return state.map((stream) => {\n        if (stream.id === action.payload) stream.isPlaying = false;\n\n        return stream;\n      });\n    case CHANGE_STATUS_TO_MUTE:\n      return state.map((stream) => {\n        if (stream.id === action.payload) stream.isMuted = true;\n\n        return stream;\n      });\n    case CHANGE_STATUS_TO_UNMUTE:\n      return state.map((stream) => {\n        if (stream.id === action.payload) stream.isMuted = false;\n\n        return stream;\n      });\n    case SHOW_CHAT:\n      return state.map((stream) => {\n        if (stream.id === action.payload) stream.isChatShown = true;\n\n        return stream;\n      });\n    case HIDE_CHAT:\n      return state.map((stream) => {\n        if (stream.id === action.payload) stream.isChatShown = false;\n\n        return stream;\n      });\n    default:\n      return state;\n  }\n};\n\nexport default multiViewReducer;\n","import { combineReducers } from 'redux';\nimport streamReducer from './streamReducer';\nimport multiViewReducer from './multiViewReducer';\n\nexport default combineReducers({\n  streamReducer,\n  multiViewReducer,\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport reduxThunk from 'redux-thunk';\n\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport reducers from './reducers';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  reducers,\n  composeEnhancers(applyMiddleware(reduxThunk))\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}