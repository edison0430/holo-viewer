(this["webpackJsonpholo-viewer"]=this["webpackJsonpholo-viewer"]||[]).push([[0],{52:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(12),s=n.n(a),i=n(3),l=n(16),o=n(38),u=(n(52),n(14)),d=n(5),j=n(4),b=n(6),f=n(1);var x=function(e){var t=e.open,n=e.toggle,r=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=function(e){if(!r.current.contains(e.target)){if(!t)return;n()}};return window.addEventListener("click",e,!0),function(){return window.removeEventListener("click",e,!0)}}),[t,n]),Object(f.jsxs)("aside",{ref:r,className:"fixed top-0 left-0 h-screen w-56 ".concat(!t&&"-translate-x-full"," bg-white dark:bg-gray-700 dark:text-gray-100 z-10 transform duration-200"),children:[Object(f.jsxs)("div",{className:"h-14 pl-4 mb-2 flex items-center space-x-4",children:[Object(f.jsx)("button",{onClick:n,className:"w-6 h-6",children:Object(f.jsx)(b.d,{})}),Object(f.jsx)("div",{className:"text-xl tracking-wide font-bold",children:"Holo Viewer"})]}),Object(f.jsxs)("nav",{children:[Object(f.jsxs)(u.c,{to:"/",exact:!0,className:"py-2 px-4 flex items-center space-x-4 hover:bg-gray-100 dark:hover:bg-gray-500",activeClassName:"bg-gray-200 dark:bg-gray-600",onClick:n,children:[Object(f.jsx)(b.c,{className:"h-6 w-6"}),Object(f.jsx)("span",{children:"\u9996\u9801"})]}),Object(f.jsxs)(u.c,{to:"/multi-view",exact:!0,className:"py-2 px-4 flex items-center space-x-4 hover:bg-gray-100 dark:hover:bg-gray-500",activeClassName:"bg-gray-200 dark:bg-gray-600",onClick:n,children:[Object(f.jsx)(b.j,{className:"h-6 w-6"}),Object(f.jsx)("span",{children:"\u591a\u7a97\u95b1\u89bd"})]})]})]})},m=n(13),h=n.n(m),O=n(2),g=n(20),v="REQUEST_LIVE_STREAM",p="RECEIVE_LIVE_STREAM",y="REQUEST_SCHEDULED_STREAM",w="RECEIVE_SCHEDULED_STREAM",N="FETCH_CHANNEL",k="FETCH_MEMBER",S="ADD_STREAM_TO_MULTI_VIEW",E="REMOVE_STREAM_FROM_MULTI_VIEW",C="CHANGE_STATUS_TO_PLAY",_="CHANGE_STATUS_TO_PAUSE",R="CHANGE_STATUS_TO_MUTE",T="CHANGE_STATUS_TO_UNMUTE",L="SHOW_CHAT",M="HIDE_CHAT",I=n(40),A=n.n(I).a.create({baseURL:"https://holo.dev/api/v1"}),H=function(){return function(){var e=Object(g.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:v}),e.next=3,A.get("/lives/current");case 3:n=e.sent,c=n.data.lives.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{status:"live"})})),t({type:p,payload:c});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U=function(){return function(){var e=Object(g.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:y}),e.next=3,A.get("/lives/scheduled");case 3:n=e.sent,c=n.data.lives.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{status:"scheduled"})})),t({type:w,payload:c});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},V=function(){return function(){var e=Object(g.a)(h.a.mark((function e(t){var n,c,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(n=JSON.parse(sessionStorage.getItem("channel"))||[]).length){e.next=13;break}c=1,r=!0;case 4:if(!r){e.next=12;break}return e.next=7,A.get("channels?limit=100&page=".concat(c));case 7:a=e.sent,(n=n.concat(a.data.channels)).length<a.data.total?c++:r=!1,e.next=4;break;case 12:sessionStorage.setItem("channel",JSON.stringify(n));case 13:t({type:N,payload:n});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=function(){return function(){var e=Object(g.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(n=JSON.parse(sessionStorage.getItem("member"))||[]).length){e.next=7;break}return e.next=4,A.get("/members");case 4:c=e.sent,n=c.data,sessionStorage.setItem("member",JSON.stringify(n));case 7:t({type:k,payload:n});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(e){return{type:S,payload:e}},B=function(e){return{type:E,payload:e}},D=function(e){return{type:C,payload:e}},z=function(e){return{type:_,payload:e}},J=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),W=function(e){var t=e.title,n=e.parentNode,r=Object(c.useRef)(),a=Object(c.useState)("-translate-x-1/2"),i=Object(j.a)(a,2),l=i[0],o=i[1],u=Object(c.useState)({}),d=Object(j.a)(u,2),b=d[0],x=d[1];return Object(c.useEffect)((function(){var e=n.current.getBoundingClientRect();x({left:e.x+e.width/2,top:e.y+e.height})}),[n]),Object(c.useEffect)((function(){var e=r.current.getBoundingClientRect();b.left+e.width/2>window.innerWidth?o("-translate-x-full"):b.left-e.width/2<0&&o("")}),[b.left]),s.a.createPortal(Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:"absolute -top-full -left-full bg-gray-700 text-white text-sm px-3 py-2 rounded-md translate-y-4 ".concat(l," w-1/2 max-w-max ").concat(J&&"opacity-0"),style:Object(O.a)({},b),ref:r,children:t})}),document.querySelector("#tooltip"))},G=function(e){var t=e.title,n=e.content,r=e.duration,a=void 0===r?3e4:r,i=e.onClose;return Object(c.useEffect)((function(){var e=setTimeout((function(){return i()}),a);return function(){return clearTimeout(e)}}),[a,i]),s.a.createPortal(Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:"fixed top-20 left-1/2 px-6 py-3 rounded-mg -translate-x-1/2 shadow-notification bg-white dark:bg-gray-800 dark:text-gray-100 w-1/2 max-w-sm",children:Object(f.jsxs)("div",{className:"relative",children:[Object(f.jsx)("h2",{className:"mb-2 pr-6",children:t}),Object(f.jsx)("p",{className:"text-sm",children:n}),Object(f.jsx)("button",{className:"absolute top-0 right-2 w-4 h-4",onClick:function(){return i()},children:Object(f.jsx)(b.m,{})})]})})}),document.getElementById("notification"))};var q=function(e){var t,n=Object(i.c)((function(e){return e.streamReducer.channel})),c=Object(i.c)((function(e){return e.streamReducer.member})),r=null===(t=n.find((function(t){return t.id===e})))||void 0===t?void 0:t.member_id;return c.find((function(e){return e.id===r}))};var Q=function(e){var t=e.stream,n=Object(c.useState)(!1),r=Object(j.a)(n,2),a=r[0],s=r[1],l=Object(c.useState)(!1),o=Object(j.a)(l,2),u=o[0],d=o[1],b=Object(c.useState)({title:"",content:""}),x=Object(j.a)(b,2),m=x[0],h=x[1],O=Object(c.useRef)(),g=Object(i.b)(),v=Object(i.c)((function(e){return e.multiViewReducer})),p=q(t.channel_id);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{className:"rounded-full  ".concat(v.some((function(e){return e.id===t.id}))&&"ring-4 ring-red-500"),onClick:function(){return function(e){if(v.some((function(t){return t.id===e.id})))g(B(e.id));else{if(v.length>=9)return h({title:"\u64cd\u4f5c\u5931\u6557",content:"\u5df2\u9054\u5217\u8868\u4e0a\u9650"}),void d(!0);g(P(e))}}(t)},onMouseEnter:function(){s(!0)},onMouseLeave:function(){s(!1)},ref:O,children:Object(f.jsx)("img",{className:"w-12 h-12 rounded-full",src:null===p||void 0===p?void 0:p.avatar,alt:"avatar"})}),a&&Object(f.jsx)(W,{title:"".concat(null===p||void 0===p?void 0:p.name," - ").concat(t.title),parentNode:O}),u&&Object(f.jsx)(G,{title:m.title,content:m.content,onClose:function(){return d(!1)}})]})};var X=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.streamReducer.liveStream}));return Object(c.useEffect)((function(){e(H()),e(U()),e(V()),e(F())}),[e]),Object(f.jsx)("div",{className:"flex flex-shrink-0 space-x-4  no-scrollbar",children:t.items.map((function(e){return Object(f.jsx)(Q,{stream:e},e.id)}))})},Y=function(e){var t=e.isOpen,n=e.toggle,r=e.children,a=e.title,i=e.onOk,l=Object(c.useRef)();Object(c.useEffect)((function(){var e=function(e){var c;if(!(null===(c=l.current)||void 0===c?void 0:c.contains(e.target))){if(!t)return;n(!1)}};return window.addEventListener("click",e,!0),function(){return window.removeEventListener("click",e,!0)}}),[t,l,n]);return t?s.a.createPortal(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"fixed top-0 left-0 z-30 w-screen h-screen bg-black opacity-50"}),Object(f.jsx)("div",{className:"fixed top-0 overflow-y-auto left-0 z-40 w-full h-full m-0",children:Object(f.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-10/12 md:w-6/12 lg:w-4/12",ref:l,children:Object(f.jsxs)("div",{className:"relative flex flex-col bg-white dark:bg-gray-800 dark:text-gray-100 pointer-events-auto px-7 py-4 space-y-4 rounded",children:[a&&Object(f.jsx)("div",{className:"text-2xl",children:a}),Object(f.jsx)("div",{children:r}),Object(f.jsx)("div",{className:"self-end",children:function(){if(i)return Object(f.jsx)("button",{className:"px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-sm",onClick:function(){i(),n(!1)},children:"\u78ba\u5b9a"})}()})]})})})]}),document.querySelector("#modal")):null},K=n(19);var Z=function(e){var t=e.id,n=e.channelId,c=e.title,r=e.isPlaying,a=e.isMuted,s=e.isChatShown,l=Object(i.b)(),o=q(n);return Object(f.jsxs)("div",{className:"flex mb-4",children:[(null===o||void 0===o?void 0:o.avatar)?Object(f.jsx)("img",{className:"self-center w-12 h-12 rounded-full mr-3",src:null===o||void 0===o?void 0:o.avatar,alt:"avatar"}):Object(f.jsx)(b.h,{className:"w-12 h-12 mr-3"}),Object(f.jsxs)("div",{className:"flex-1 min-w-0 space-y-2",children:[Object(f.jsx)("p",{className:"truncate",children:c}),Object(f.jsxs)("div",{className:"flex justify-center items-center space-x-4",children:[Object(f.jsx)("button",{className:"w-8 h-8 text-gray-500 hover:text-gray-600 dark:text-gray-300 dark:hover:text-gray-200",onClick:function(){return l(r?z(t):D(t))},children:r?Object(f.jsx)(b.e,{}):Object(f.jsx)(b.f,{})}),Object(f.jsx)("button",{className:"w-8 h-8 text-gray-500 hover:text-gray-600 dark:text-gray-300 dark:hover:text-gray-200",onClick:function(){return l(a?function(e){return{type:T,payload:e}}(t):function(e){return{type:R,payload:e}}(t))},children:a?Object(f.jsx)(b.k,{}):Object(f.jsx)(b.l,{})}),Object(f.jsx)("button",{className:"w-8 h-8 text-gray-500 hover:text-gray-600 dark:text-gray-300 dark:hover:text-gray-200",onClick:function(){l(s?function(e){return{type:M,payload:e}}(t):function(e){return{type:L,payload:e}}(t))},children:s?Object(f.jsx)(K.a,{}):Object(f.jsx)(b.b,{})}),Object(f.jsx)("button",{className:"w-8 h-8 text-gray-500 hover:text-gray-600 dark:text-gray-300 dark:hover:text-gray-200",onClick:function(){return l(B(t))},children:Object(f.jsx)(b.g,{})})]})]})]})};var $=function(e){var t=e.isOpen,n=e.toggle,c=Object(i.c)((function(e){return e.multiViewReducer})),r=c.length,a=c.map((function(e){var t=e.id,n=e.channel_id,c=e.title,r=e.isPlaying,a=e.isMuted,s=e.isChatShown;return Object(f.jsx)(Z,{id:t,channelId:n,title:c,isPlaying:r,isMuted:a,isChatShown:s},t)}));return Object(f.jsx)(Y,{isOpen:t,toggle:n,title:"\u63a7\u5236\u9762\u7248",children:r?a:"\u76ee\u524d\u6c92\u6709\u9078\u53d6\u5230\u5f71\u7247"})},ee=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),s=Object(j.a)(a,2),i=s[0],l=s[1],o=Object(c.useRef)();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{className:"w-10 h-10",onClick:function(){return r((function(e){return!e}))},onMouseEnter:function(){l(!0)},onMouseLeave:function(){l(!1)},ref:o,children:Object(f.jsx)(b.a,{className:"text-yellow-300 hover:text-yellow-400 rounded-full"})}),i&&Object(f.jsx)(W,{title:"\u958b\u555f\u63a7\u5236\u9762\u7248",parentNode:o}),Object(f.jsx)($,{isOpen:n,toggle:function(){r(!n)}})]})};var te=function(e){var t=e.isOpen,n=e.toggle,r=Object(c.useState)(""),a=Object(j.a)(r,2),s=a[0],l=a[1],o=Object(c.useState)(!1),u=Object(j.a)(o,2),d=u[0],b=u[1],x=Object(c.useState)({title:"",content:""}),m=Object(j.a)(x,2),h=m[0],O=m[1],g=Object(i.b)(),v=Object(i.c)((function(e){return e.multiViewReducer}));return Object(c.useEffect)((function(){t||l("")}),[t]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Y,{isOpen:t,toggle:n,title:"\u8acb\u8f38\u5165\u6b32\u89c0\u770b\u5f71\u7247\u4e4b Youtube URL link",onOk:function(){var e=/https:\/\/www\.youtube\.com\/watch\?v=(\w+)/.exec(s);if(!e)return O({title:"\u64cd\u4f5c\u5931\u6557",content:"URL \u683c\u5f0f\u4e0d\u6b63\u78ba"}),void b(!0);if(v.some((function(t){return t.id===e[1]})))return O({title:"\u64cd\u4f5c\u5931\u6557",content:"\u6b64 URL \u5df2\u5728\u64ad\u653e\u5217\u8868\u4e2d"}),void b(!0);if(v.length>=9)return O({title:"\u64cd\u4f5c\u5931\u6557",content:"\u5df2\u9054\u5217\u8868\u4e0a\u9650"}),void b(!0);var t={id:e[1],title:e[1],room:e[1]};g(P(t))},children:Object(f.jsx)("input",{type:"text",placeholder:"e.g. https://www.youtube.com/watch?v=5qap5aO4i9A",className:"w-full outline-none border-2 dark:border-gray-500 px-2 py-1 dark:bg-gray-700 dark:text-gray-100",value:s,onChange:function(e){return l(e.target.value)}})}),d&&Object(f.jsx)(G,{title:h.title,content:h.content,onClose:function(){return b(!1)}})]})},ne=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),s=Object(j.a)(a,2),i=s[0],l=s[1],o=Object(c.useRef)();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{className:"h-10 w-10 text-green-300 hover:text-green-400",onClick:function(){return r((function(e){return!e}))},onMouseEnter:function(){l(!0)},onMouseLeave:function(){l(!1)},ref:o,children:Object(f.jsx)(b.i,{})}),i&&Object(f.jsx)(W,{title:"\u589e\u52a0\u5f71\u7247",parentNode:o}),Object(f.jsx)(te,{isOpen:n,toggle:function(){r(!n)}})]})};var ce=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"flex items-center overflow-x-auto no-scrollbar h-full px-2",children:Object(f.jsx)("div",{className:"flex items-center justify-start",children:Object(f.jsx)(X,{})})}),Object(f.jsx)("div",{className:"flex-1 flex justify-end",children:Object(f.jsxs)("div",{className:"flex items-center space-x-2",children:[Object(f.jsx)(ne,{}),Object(f.jsx)(ee,{})]})})]})},re=function(){var e=Object(c.useState)("dark"===window.localStorage.getItem("theme")),t=Object(j.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){n?(document.documentElement.classList.add("dark"),window.localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),window.localStorage.setItem("theme","light"))}),[n]),Object(f.jsxs)("div",{onClick:function(){r(!n)},className:"relative cursor-pointer",children:[Object(f.jsxs)("div",{className:"w-12 h-6 rounded-full bg-gray-900",children:[Object(f.jsx)("div",{className:"absolute top-[2px] left-[2px]",children:Object(f.jsx)(K.b,{className:"w-5 h-5 text-yellow-400"})}),Object(f.jsx)("div",{className:"absolute top-[2px] right-[2px]",children:Object(f.jsx)(K.c,{className:"w-5 h-5 text-yellow-400"})})]}),Object(f.jsx)("div",{className:"absolute top-[1px] w-[22px] h-[22px] ".concat(n?"left-6":"left-[1px]"," bg-gray-100 rounded-full duration-200")})]})};var ae=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(d.f)(),s=function(){r((function(e){return!e}))};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(u.a,{children:Object(f.jsx)(d.c,{children:Object(f.jsx)(d.a,{})})}),Object(f.jsxs)("header",{className:"h-14 w-full flex items-center bg-gray-400/90 dark:bg-gray-700/90 dark:text-gray-100 sticky top-0 z-10 backdrop-blur-sm px-4",children:[Object(f.jsx)("button",{onClick:s,className:"w-6 h-6 flex-shrink-0",children:Object(f.jsx)(b.d,{})}),function(){switch(a.pathname){case"/multi-view":return Object(f.jsx)(ce,{});default:return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"text-xl tracking-wide font-bold px-4 flex-1",children:"Holo Viewer"}),Object(f.jsx)("div",{className:"space-x-2",children:Object(f.jsx)(re,{})})]})}}()]}),Object(f.jsx)(x,{open:n,toggle:s})]})};var se=function(e){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(ae,{}),Object(f.jsx)("main",{children:e.children})]})},ie=n(7),le=n.n(ie),oe=n(22),ue=n.n(oe),de=(n(76),n(41)),je=n.n(de);function be(e){var t=le()();return le.a.duration(t.diff(le()(e))).format("HH:mm:ss")}le.a.extend(ue.a),le.a.extend(je.a);var fe=function(e){var t=e.stream.start_at,n=Object(c.useState)((function(){return be(t)})),r=Object(j.a)(n,2),a=r[0],s=r[1];return Object(c.useEffect)((function(){var e=setInterval((function(){s(be(t))}),1e3);return function(){clearInterval(e)}}),[t]),Object(f.jsx)("span",{className:"absolute bottom-2 right-2 text-white font-bold tracking-wide bg-red-600/90 px-2 py-0 rounded-sm",children:a})};le.a.extend(ue.a),le.a.locale("zh-tw");var xe=function(e){var t=e.stream,n=q(t.channel_id);return Object(f.jsx)("a",{href:"https://www.youtube.com/watch?v=".concat(t.room),target:"_blank",rel:"noreferrer noopener",children:Object(f.jsxs)("div",{className:"w-full shadow bg-white dark:bg-gray-700 dark:text-gray-100 rounded-lg overflow-hidden",children:[Object(f.jsxs)("div",{className:"relative pt-[56.25%]",children:[Object(f.jsx)("img",{className:"absolute top-0 left-0 w-full h-full object-contain",src:t.cover,alt:t.title}),"live"===t.status&&Object(f.jsx)(fe,{stream:t})]}),Object(f.jsxs)("div",{className:"flex items-center h-[80px]",children:[Object(f.jsx)("div",{className:"w-[50px] rounded-full overflow-hidden ml-2 mr-4",children:Object(f.jsx)("img",{src:null===n||void 0===n?void 0:n.avatar,alt:"avator"})}),Object(f.jsxs)("div",{className:"flex-1 min-w-0",children:[Object(f.jsx)("p",{className:"text-lg text-left tracking-wide text-i truncate",children:t.title}),Object(f.jsx)("p",{className:"pt-1",children:null===n||void 0===n?void 0:n.name}),"scheduled"===t.status&&function(){var e=le()(t.start_at).format("HH:mm"),n=le()(t.start_at).fromNow();return Object(f.jsxs)("p",{className:"text-sm",children:["\u5c07\u65bc ",n,"\u958b\u59cb (",e,")"]})}()]})]})]},t.id)})},me=function(){return Object(f.jsxs)("div",{className:"w-full shadow bg-white dark:bg-gray-700 overflow-hidden rounded-lg animate-pulse",children:[Object(f.jsx)("div",{className:"relative pt-[56.25%] bg-gray-300 dark:bg-gray-500"}),Object(f.jsxs)("div",{className:"flex items-center h-[80px]",children:[Object(f.jsx)("div",{className:"w-[50px] h-[50px] rounded-full ml-2 mr-4 bg-gray-300 dark:bg-gray-500"}),Object(f.jsxs)("div",{className:"flex-1 space-y-4",children:[Object(f.jsx)("div",{className:"w-2/3 h-[20px] bg-gray-300 dark:bg-gray-500 rounded-lg"}),Object(f.jsx)("div",{className:"w-1/3 h-[20px] bg-gray-300 dark:bg-gray-500 rounded-lg"})]})]})]})};var he=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.streamReducer.liveStream})),n=Object(i.c)((function(e){return e.streamReducer.scheduledStream}));Object(c.useEffect)((function(){e(H()),e(U()),e(V()),e(F())}),[e]);var r=function(){return Array(5).fill().map((function(e,t){return Object(f.jsx)(me,{},t)}))};return Object(f.jsxs)("div",{className:"p-4 min-h-screen bg-gray-100 dark:bg-gray-800",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"text-lg font-bold text-green-600 dark:text-green-300 mb-5",children:"\u76f4\u64ad\u4e2d"}),Object(f.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2",children:t.isLoading?r():0===t.items.length?"There is no live stream now":t.items.map((function(e){return Object(f.jsx)(xe,{stream:e},e.id)}))})]}),Object(f.jsxs)("div",{className:"mt-6",children:[Object(f.jsx)("p",{className:"text-lg font-bold text-green-600 dark:text-green-300 mb-5",children:"\u9810\u5b9a\u76f4\u64ad"}),Object(f.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2",children:n.isLoading?r():0===n.items.length?"There is no scheduled stream now":n.items.filter((function(e){return le()(e.start_at).isBefore(le()().add(1,"day"))})).map((function(e){return Object(f.jsx)(xe,{stream:e},e.id)}))})]})]})},Oe=n(42),ge=n.n(Oe),ve=function(){return Object(f.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(f.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Object(f.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},pe=1,ye=2;var we=function(e){var t=e.stream,n=Object(i.b)(),r=t.id,a=t.room,s=t.isPlaying,l=t.isMuted,o=t.isChatShown,u=Object(c.useState)(null),d=Object(j.a)(u,2),b=d[0],x=d[1],m=Object(c.useState)(!1),h=Object(j.a)(m,2),O=h[0],g=h[1];Object(c.useEffect)((function(){var e=ge()("player-".concat(r),{width:"100%",height:"100%",videoId:a,playerVars:{playsinline:1}});x(e);var t=e.on("stateChange",(function(e){e.data===pe?n(D(r)):e.data===ye&&n(z(r))}));return e.on("ready",(function(){return g(!0)})),function(){return e.off(t)}}),[r,a,n]),Object(c.useEffect)((function(){b&&(s?b.playVideo():b.pauseVideo())}),[b,s]),Object(c.useEffect)((function(){b&&(l?b.mute():b.unMute())}),[b,l]);var v="https://gaming.youtube.com/live_chat?v=".concat(t.room,"&embed_domain=").concat(window.location.hostname);return Object(f.jsxs)("div",{className:"flex flex-col lg:flex-row bg-black",children:[Object(f.jsxs)("div",{className:"relative pt-[56.25%] lg:pt-0 lg:flex-1",children:[!O&&Object(f.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full bg-black text-white flex justify-center items-center",children:[Object(f.jsx)(ve,{}),"Loading..."]}),Object(f.jsx)("div",{className:"absolute top-0 left-0 w-full h-full",id:"player-".concat(t.id)})]}),Object(f.jsx)("div",{className:"w-full lg:w-[300px] h-[400px] lg:h-full ".concat(!o&&"hidden"),children:Object(f.jsx)("iframe",{title:"chatRoom",src:v,width:"100%",height:"100%",frameBorder:"0"})})]})},Ne={1:"lg:grid-cols-1",2:"lg:grid-cols-2",3:"lg:grid-cols-2",4:"lg:grid-cols-2",5:"lg:grid-cols-3",6:"lg:grid-cols-3",7:"lg:grid-cols-3",8:"lg:grid-cols-3",9:"lg:grid-cols-3"};var ke=function(){var e=Object(i.c)((function(e){return e.multiViewReducer})),t=e.length;return Object(f.jsx)("div",{className:"lg:h-[calc(100vh-56px)] lg:grid lg:grid-flow-row dark:bg-gray-800 ".concat(t&&Ne[t]),children:function(){if(t>=0)return e.map((function(e){return Object(f.jsx)(we,{stream:e},e.id)}))}()})};var Se=function(){return Object(f.jsx)(u.b,{children:Object(f.jsx)(se,{children:Object(f.jsxs)(d.c,{children:[Object(f.jsx)(d.a,{path:"/",exact:!0,component:he}),Object(f.jsx)(d.a,{path:"/multi-view",exact:!0,component:ke})]})})})},Ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,89)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},Ce={liveStream:{isLoading:!1,items:[]},scheduledStream:{isLoading:!1,items:[]},channel:[],member:[]},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(O.a)(Object(O.a)({},e),{},{liveStream:Object(O.a)(Object(O.a)({},e.liveStream),{},{isLoading:!0})});case p:return Object(O.a)(Object(O.a)({},e),{},{liveStream:{items:t.payload,isLoading:!1}});case y:return Object(O.a)(Object(O.a)({},e),{},{scheduledStream:Object(O.a)(Object(O.a)({},e.scheduledStream),{},{isLoading:!0})});case w:return Object(O.a)(Object(O.a)({},e),{},{scheduledStream:{items:t.payload,isLoading:!1}});case N:return Object(O.a)(Object(O.a)({},e),{},{channel:t.payload});case k:return Object(O.a)(Object(O.a)({},e),{},{member:t.payload});default:return e}},Re=n(27),Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return[].concat(Object(Re.a)(e),[Object(O.a)(Object(O.a)({},t.payload),{},{isChatShown:!0,isPlaying:!1,isMuted:!1})]);case E:return Object(Re.a)(e).filter((function(e){return e.id!==t.payload}));case C:return e.map((function(e){return e.id===t.payload&&(e.isPlaying=!0),e}));case _:return e.map((function(e){return e.id===t.payload&&(e.isPlaying=!1),e}));case R:return e.map((function(e){return e.id===t.payload&&(e.isMuted=!0),e}));case T:return e.map((function(e){return e.id===t.payload&&(e.isMuted=!1),e}));case L:return e.map((function(e){return e.id===t.payload&&(e.isChatShown=!0),e}));case M:return e.map((function(e){return e.id===t.payload&&(e.isChatShown=!1),e}));default:return e}},Le=Object(l.b)({streamReducer:_e,multiViewReducer:Te}),Me=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,Ie=Object(l.d)(Le,Me(Object(l.a)(o.a)));s.a.render(Object(f.jsx)(i.a,{store:Ie,children:Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(Se,{})})}),document.getElementById("root")),Ee()}},[[88,1,2]]]);
//# sourceMappingURL=main.19b7e91a.chunk.js.map